<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

    <!-- Import pure.css -->
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css"
    integrity="sha384-cg6SkqEOCV1NbJoCu11+bm0NvBRc8IYLRGXkmNrqUBfTjmMYwNKPWBTIKyw9mHNJ" crossorigin="anonymous">

    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">

  <meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="stylesheet" type="text/css" href="css/styles.css" media="all">

  <script>
    function showGraph(n) {
        var graphs = document.getElementsByClassName('graph');
        for (var i = 0; i < graphs.length; i++) {
            graphs[i].style.display = 'none';
        }
        for (var i = 1; i <= 3; i++) {
            var button = document.getElementById('button' + i);
            if (i === n) {
                button.classList.add('pure-button-active');
                document.getElementById('graph' + i).style.display = 'block';
            } else {
                button.classList.remove('pure-button-active');
            }
        }
    }
</script>


  <!-- <title>Tuberculosis Fatality Rate Chart</title> -->

</head>
<body>

  <div class="page">

    <!-- pure grid group -->
    <div class="pure-g">
      <div class="pure-u-1-1">
        <h1>Sustainability Development Goal 3: Tuberculosis</h1>
        <h2> What are the Sustainability Goals?</h2>
        <p>
          The Sustainable Development Goals (SDGs), established by the United Nations in 2015, are a universal call to action to end poverty, protect the planet, and ensure prosperity for all by 2030. There are 17 interconnected goals that address a wide range of global challenges, including poverty, inequality, climate change, environmental degradation, peace, and justice. 
          We will cover SDG 3: Combating communicable diseases, focusing on the disease Tuberculosis.
        </p>
        <p>Tuberculosis (TB) is a highly contagious bacterial infection primarily caused by Mycobacterium tuberculosis. It predominantly affects the lungs but can also impact other organs. TB is a major global health concern due to its contagious nature and the risk it poses to individuals with weakened immune systems. Following the COVID-19 pandemic, it was the second most deadly disease after the novel coronavirus. Our dataset will cover up to 2021 historical</p>
      </div>
    </div>

    <!-- <div id="fatality_map" class="vis-container"></div> -->
    <div id="carousel">
      <div id="graph1" class="graph">
          <div id="fatality_map" class="vis-container">
              <!-- Your content for the first graph here -->
              <h2>Fatality Rate</h2>
          </div>
      </div>
      <div id="graph2" class="graph" style="display: none;">
          <div id="incident_map" class="vis-container">
              <!-- Your content for the second graph here -->
              <h2>Incidences</h2>
          </div>
      </div>
      <div id="graph3" class="graph" style="display: none;">
          <div id="death_map" class="vis-container">
              <!-- Your content for the third graph here -->
              <h2>Deaths</h2>
          </div>
      </div>
  </div>

  <div>
    <a id="button1" class="pure-button" onclick="showGraph(1)">Fatality Rate</a>
    <a id="button2" class="pure-button" onclick="showGraph(2)">Incidences</a>
    <a id="button3" class="pure-button" onclick="showGraph(3)">Deaths</a>
</div>

    
    <div><h2>TB Fatality, Incidences and Deaths</h2></div>

  <div class="pure-g">
    <div class="pure-u-1-2">
      <div class="description description-left">
        <p>The fatality rate of TB varies depending on several factors, including access to healthcare, the strain of the bacteria, and the patient's overall health. 
          Surprisingly, it actually has a fairly low fatality rate, but it is 
          exacerbated by lack of access to healthcare/resources or resources in developing countries. We can especially see this in risk factors, where undernutrition is cause for concern. 
          With an estimated global average fatality rate of about 15%, it still is one of the top contagious disease killers worldwide, running second to pandemic COVID-19.
          However, early detection and appropriate treatment with antibiotics can significantly reduce the fatality rate and help individuals recover from TB. 
          </p>
      </div>
    </div>
    <div class="pure-u-1-2">
      <p> Due to this, Tuberculosis affects developing countries extremely disproportionally compared to developed countries. For example, we can see that United Arab Emirates has a shockingly high rate of mortality, with 80% of their cases resulting in death. The African nation overall has 20-40% fatality rates, followed by Asia. Compared to Australia, Australia has a low 4% rate.
        It is a known treatable disease since 1944, however the process requires 6 months of recuperation and medication. The strain on resources such as the drugs, tests, hospital spaces required has been a large social concern in third world countries since.  
        Below, we can view each continental region's trend over time in their incidence rates, and deaths. 
      </p>
    
      </div>
  </div>



<!-- occurrences -->
<div>
  <h2>TB Incidence Rates (per 100,000 people) over time</h2>
  <select id="viewSelectOccurrences" onchange="changeViewOccurrences()">
    <option value="main">Main View</option>
    <option value="regional">Regional View</option>
  </select>
</div>

<div>
  <div id="line_incident_graph" class="vis-container" style="display: block;">
    <!-- Your content for the main line incident graph here -->
    <h2>Main Line Occurrences Graph</h2>
  </div>
  <div id="line_incident_graph_facet" class="vis-container" style="display: none;">
    <!-- Your content for the regional line incident graph here -->
    <h2>Regional Line Occurrences Graph</h2>
  </div>
</div>


<!-- deaths -->
<div>
  <h2>TB Deaths over time</h2>
  <select id="viewSelectDeaths" onchange="changeViewDeaths()">
    <option value="main">Main View</option>
    <option value="regional">Regional View</option>
  </select>
</div>

<div>
  <div id="line_death_graph" class="vis-container" style="display: block;">
    <!-- Your content for the main line death graph here -->
    <h2>Main Line Death Graph</h2>
  </div>
  <div id="line_death_graph_facet" class="vis-container" style="display: none;">
    <!-- Your content for the regional line death graph here -->
    <h2>Regional Line Death Graph</h2>
  </div>
</div>

<div class="pure-g">
  <div class="pure-u-1-1">
    <p>
      Historical trends of TB incidence rates and deaths have demonstrated a complex interplay between social, economic, and healthcare factors across different continents. 
      While some regions have experienced a decline in TB incidence rates and deaths due to improved healthcare infrastructure, awareness campaigns, and effective treatment regimens, others have faced persistent challenges, often stemming from socioeconomic disparities, limited access to healthcare, and inadequate resources for disease prevention and control. Continents such as Europe and North America have witnessed a substantial reduction in TB incidence and mortality rates over the past few decades, reflecting successful public health interventions and comprehensive healthcare systems. In contrast, regions like Africa and Southeast Asia have struggled with a high burden of TB cases and associated deaths, partially attributed to poverty, malnutrition, crowded living conditions, and co-infection with HIV. </p>
  </div>
</div>
  
   <!-- risk chart -->
    <div> 
      <h2>Common Risk Factors</h2>
   <div class="pure-g">
    <div class="pure-u-1-2">
      <div class="description description-left">
         <p> Risk factors include close contact with individuals with active TB, weakened immune systems due 
        to conditions like HIV/AIDS, malnutrition, and chronic illnesses, as well as behavioral factors such as substance abuse and smoking. Age, homelessness, incarceration, travel to high-incidence areas, and previous incomplete TB treatment can also elevate the risk. Additionally, healthcare workers and individuals in healthcare settings with inadequate infection control may face increased exposure risk.
         TB is a treatable disease, but awareness of these risk factors is crucial for prevention and early treatment.</p>
      </div>
    </div>
    <div class="pure-u-1-2">
      <div id="risk_chart" class="vis-container">
    </div>
  </div>
</div>

   <!-- Funding chart -->
   <div>
    <h2>TB estimated funding</h2>
    <div class="pure-g">
      <div class="pure-u-1-2">
        <div id="fund_chart" class="vis-container"></div>
      </div>
      <div class="pure-u-1-2">
        <div class="description description-right">
          <p>
            Funding for tuberculosis research has remained always critically insufficient, 
            a stark contrast to the rapid $104 billion spent on COVID-19 research and development during the same period. 
            Despite the urgent call for $10 billion to effectively combat tuberculosis, 
            current funding levels fall considerably short, perpetuating the disparity between COVID-19 
            efforts in wealthier nations and the needs of low-income countries affected by tuberculosis. 
            Closing this funding gap necessitates a concerted effort to prioritize and invest in ending tuberculosis on a global scale.
          </p>
        </div>
      </div>
    </div>
  </div>
  


    <!-- conclusion -->
    <div class="pure-g">
      <div class="pure-u-1-1">
        <h2> Conclusion</h2>
        <p>
          The Sustainable Development Goals (SDGs), established by the United Nations in 2015, are a universal call to action to end poverty, protect the planet, and ensure prosperity for all by 2030. There are 17 interconnected goals that address a wide range of global challenges, including poverty, inequality, climate change, environmental degradation, peace, and justice. 
          We will cover SDG 3: Combating communicable diseases, focusing on the disease Tuberculosis.
        </p>
        <p>Tuberculosis (TB) is a contagious bacterial infection primarily caused by Mycobacterium tuberculosis. It predominantly affects the lungs but can also impact other organs. TB is a major global health concern due to its contagious nature and the risk it poses to individuals with weakened immune systems.</p>
      </div>
    </div>



  <!-- <script src="vis1.js"></script> -->

  <script type="text/javascript">
    var specVis1 = "Graph1-3_Fatality_Map.json";
    var specVis2 = "Graph2.json";


    var specVis3 = "Graph3_Incident_Line.json";

    var specVis4 = "Graph4_TB_deaths_Line.json";
    var specVis4_5 = "Graph4-5_Facet_Deaths.json";

    // map graphs: incidence and death
    var specVis1_5 = "Graph1-1_Incident_Map.json";
    var specVis1_6 = "Graph1-2_Death_Map.json";
    // risk chart
    var specVis5 = "Graph6_Risk_Chart.json";

    var specVis6 = "Graph7_Global_Fund.json";

    // incidence charts
    var specVis7 = "Graph3_Incident_Line.json"
    var specVis8 = "Graph3-5_Incident_Facet.json"


  vegaEmbed('#fatality_map', specVis1, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#incident_map', specVis1_5, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#death_map', specVis1_6, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#bubble_chart', specVis2, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#line_graph', specVis3, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#line_death_graph', specVis4, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#line_death_graph_facet', specVis4_5, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);
    
    vegaEmbed('#risk_chart', specVis5, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#fund_chart', specVis6, { "actions": false }).then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

    vegaEmbed('#line_incident_graph', specVis7, { "actions": false }).then(function (result) {
  // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    }).catch(console.error);

  vegaEmbed('#line_incident_graph_facet', specVis8, { "actions": false }).then(function (result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
      }).catch(console.error);


 // Initial display setup for the graphs
  document.getElementById('line_death_graph').style.display = 'block';
  document.getElementById('line_death_graph_facet').style.display = 'none';

  document.getElementById('line_incident_graph').style.display = 'block';
  document.getElementById('line_incident_graph_facet').style.display = 'none';

  function changeViewDeaths() {
    var selectBox = document.getElementById("viewSelectDeaths");
    var selectedValue = selectBox.options[selectBox.selectedIndex].value;

    if (selectedValue === "main") {
      document.getElementById('line_death_graph').style.display = 'block';
      document.getElementById('line_death_graph_facet').style.display = 'none';
    } else if (selectedValue === "regional") {
      document.getElementById('line_death_graph').style.display = 'none';
      document.getElementById('line_death_graph_facet').style.display = 'block';
    }
  }

  function changeViewOccurrences() {
      var selectBox1 = document.getElementById("viewSelectOccurrences");
      var selectedValue = selectBox1.options[selectBox1.selectedIndex].value;

      if (selectedValue === "main") {
        document.getElementById('line_incident_graph').style.display = 'block';
        document.getElementById('line_incident_graph_facet').style.display = 'none';
      } else if (selectedValue === "regional") {
        document.getElementById('line_incident_graph').style.display = 'none';
        document.getElementById('line_incident_graph_facet').style.display = 'block';
      }
    }

  </script>

  
</body>
</html>